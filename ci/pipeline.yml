---
resources:
  - name: pretalx
    type: git
    source: &repo-source
      uri: https://github.com/pretalx/pretalx
      branch: master
jobs:
  - name: test
    public: true
    plan:
      - get: pretalx
        trigger: true
      - task: Run tests
        file: pretalx-tests.yml
    plan:
      - get: pretalx
        trigger: true
      - task: Run lint
        file: pretalx-lint.yml
#  - name: doctest
#    serial: true
#    plan:
#      - get: pretalx
#        trigger: true
#      - file: pretalx-doctests.yml
  - name: deploy
    plan:
      - get: pretalx
        trigger: true
        passed: [test]
      - task: Run deploy on next
        file: pretalx-deploy.yml
